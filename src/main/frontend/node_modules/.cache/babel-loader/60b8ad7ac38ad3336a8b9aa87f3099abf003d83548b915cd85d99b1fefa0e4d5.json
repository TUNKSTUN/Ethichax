{"ast":null,"code":"import _objectSpread from\"C:/Users/Tunks/Downloads/backend/backend/src/main/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/Tunks/Downloads/backend/backend/src/main/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import{RiSendPlane2Fill}from\"react-icons/ri\";import{BsFillPersonFill}from\"react-icons/bs\";import firebase from\"firebase/compat/app\";import\"firebase/compat/database\";import EmojiPicker from\"emoji-picker-react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var firebaseConfig={apiKey:\"AIzaSyA4A3LrAKntsYEjnmgQCCoNWiGxfKXQS6I\",authDomain:\"ethichax.firebaseapp.com\",databaseURL:\"https://ethichax-default-rtdb.asia-southeast1.firebasedatabase.app\",projectId:\"ethichax\",storageBucket:\"ethichax.appspot.com\",messagingSenderId:\"481317404873\",appId:\"1:481317404873:web:27149fa35543002b76cd18\"};firebase.initializeApp(firebaseConfig);var db=firebase.database().ref(\"messages\");var Guest=function Guest(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),message=_useState2[0],setMessage=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),messageCards=_useState4[0],setMessageCards=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),emojiPicker=_useState6[0],setemojiPicker=_useState6[1];useEffect(function(){db.on(\"value\",function(snapshot){if(snapshot.exists()){var messagesObject=snapshot.val();var messagesArray=Object.keys(messagesObject).map(function(key){return _objectSpread({id:key},messagesObject[key]);}).reverse();setMessageCards(messagesArray);}});},[]);useEffect(function(){var intervalId=setInterval(function(){db.once(\"value\",function(snapshot){if(snapshot.exists()){var messagesObject=snapshot.val();var messagesArray=Object.keys(messagesObject).map(function(key){return _objectSpread({id:key},messagesObject[key]);}).reverse();setMessageCards(messagesArray);var MESSAGE_LIMIT=50;if(messagesArray.length>MESSAGE_LIMIT){var oldestMessage=messagesArray[MESSAGE_LIMIT];db.child(oldestMessage.id).remove();messagesArray.splice(0,MESSAGE_LIMIT);}}});},[]);return function(){return clearInterval(intervalId);};},[]);var handleMessageSubmit=function handleMessageSubmit(event){event.preventDefault();var newMessage={text:message,timestamp:Date.now()};db.push(newMessage);setMessage(\"\");};return/*#__PURE__*/_jsxs(\"div\",{className:\"xl:right-0 xl:top-0 lg:right-0 lg:top-0  flex xl:mt-0 lg:mt-0 absolute flex-col p-10 xl:pt-16 lg:pt-16 xl:p-10 lg:p-10 bg-stone-300 pt-32 w-full h-full xl:w-3/4 lg:w-4/5 text-start font-Epilogue \",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-5xl pb-5 font-bold drop-shadow-md\",children:\"Guest Book:\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"w-full flex justify-center items-center mb-5\",onSubmit:handleMessageSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"message\",className:\"w-full h-10 px-5 border-none rounded-full font-mono text-2xl tracking-widest bg-stone-900 text-stone-300 text-md shadow-sm shadow-black\",value:message,onChange:function onChange(event){return setMessage(event.target.value);}}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"px-2 xl:text-xl lg:text-xl text-base transition ease-in-out duration-500 hover:text-stone-700 \",children:/*#__PURE__*/_jsx(RiSendPlane2Fill,{})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"overflow-y-auto h-full overflow-x-hidden scrollbar bg-stone-900 p-5 scrollbar-thumb-stone-100 scrollbar-thumb-rounded scrollbar-track-black scroll-auto  transition ease-in-out duration-500 hover:scrollbar-thumb-stone-300 border-black border rounded-md \",children:messageCards.map(function(messageCard){return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-transparent  w-auto border-b-stone-600 border-b my-4 p-4 text-start text-stone-300 flex text-md xl:text-xl  gap-x-2 shadow-inner shadow-black\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"w-9 h-9 text-md rounded-full border-stone-100 border p-2 font-light bg-gradient-to-br from-white to-stone-600 text-stone-800 transition ease-linear duration-75 hover:cursor-pointer hover:bg-stone-100 hover:text-black\",children:/*#__PURE__*/_jsx(BsFillPersonFill,{})}),/*#__PURE__*/_jsx(\"div\",{className:\"text-md text-justify font-mono bg-stone-800 border-b border-stone-700 shadow-md shadow-black w-max h-full overflow-x-clip py-1 px-3 rounded-xl\",children:messageCard.text})]},messageCard.id);})})]});};export default Guest;","map":{"version":3,"names":["React","useState","useEffect","RiSendPlane2Fill","BsFillPersonFill","firebase","EmojiPicker","firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","initializeApp","db","database","ref","Guest","message","setMessage","messageCards","setMessageCards","emojiPicker","setemojiPicker","on","snapshot","exists","messagesObject","val","messagesArray","Object","keys","map","key","id","reverse","intervalId","setInterval","once","MESSAGE_LIMIT","length","oldestMessage","child","remove","splice","clearInterval","handleMessageSubmit","event","preventDefault","newMessage","text","timestamp","Date","now","push","target","value","messageCard"],"sources":["C:/Users/Tunks/Downloads/backend/backend/src/main/frontend/src/pages/Guest.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { RiSendPlane2Fill } from \"react-icons/ri\";\r\nimport {BsFillPersonFill} from \"react-icons/bs\"\r\nimport firebase from \"firebase/compat/app\";\r\nimport \"firebase/compat/database\";\r\nimport EmojiPicker from \"emoji-picker-react\"\r\n\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyA4A3LrAKntsYEjnmgQCCoNWiGxfKXQS6I\",\r\n  authDomain: \"ethichax.firebaseapp.com\",\r\n  databaseURL: \"https://ethichax-default-rtdb.asia-southeast1.firebasedatabase.app\",\r\n  projectId: \"ethichax\",\r\n  storageBucket: \"ethichax.appspot.com\",\r\n  messagingSenderId: \"481317404873\",\r\n  appId: \"1:481317404873:web:27149fa35543002b76cd18\"\r\n};\r\n\r\nfirebase.initializeApp(firebaseConfig);\r\n\r\nconst db = firebase.database().ref(\"messages\");\r\n\r\nconst Guest = () => {\r\n  const [message, setMessage] = useState(\"\");\r\n  const [messageCards, setMessageCards] = useState([]);\r\n  const [emojiPicker, setemojiPicker] = useState();\r\n\r\n  useEffect(() => {\r\n    db.on(\"value\", (snapshot) => {\r\n      if (snapshot.exists()) {\r\n        const messagesObject = snapshot.val();\r\n        const messagesArray = Object.keys(messagesObject)\r\n          .map((key) => ({ id: key, ...messagesObject[key] }))\r\n          .reverse();\r\n        setMessageCards(messagesArray);\r\n      }\r\n    });\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const intervalId = setInterval(() => {\r\n      db.once(\"value\", (snapshot) => {\r\n        if (snapshot.exists()) {\r\n          const messagesObject = snapshot.val();\r\n          const messagesArray = Object.keys(messagesObject)\r\n            .map((key) => ({ id: key, ...messagesObject[key] }))\r\n            .reverse();\r\n          setMessageCards(messagesArray);\r\n\r\n          const MESSAGE_LIMIT = 50;\r\n\r\n          if (messagesArray.length > MESSAGE_LIMIT) {\r\n            const oldestMessage = messagesArray[MESSAGE_LIMIT];\r\n            db.child(oldestMessage.id).remove();\r\n            messagesArray.splice(0, MESSAGE_LIMIT);\r\n          }\r\n          \r\n        }\r\n      });\r\n    }, []);\r\n\r\n    return () => clearInterval(intervalId);\r\n  }, []);\r\n\r\n  const handleMessageSubmit = (event) => {\r\n    event.preventDefault();\r\n    const newMessage = { text: message, timestamp: Date.now() };\r\n\r\n    db.push(newMessage);\r\n\r\n    setMessage(\"\");\r\n  };\r\n\r\n  return (\r\n    <div className=\"xl:right-0 xl:top-0 lg:right-0 lg:top-0  flex xl:mt-0 lg:mt-0 absolute flex-col p-10 xl:pt-16 lg:pt-16 xl:p-10 lg:p-10 bg-stone-300 pt-32 w-full h-full xl:w-3/4 lg:w-4/5 text-start font-Epilogue \">\r\n      <h1 className=\"text-5xl pb-5 font-bold drop-shadow-md\">Guest Book:</h1>\r\n      <form\r\n        className=\"w-full flex justify-center items-center mb-5\"\r\n        onSubmit={handleMessageSubmit}\r\n      >\r\n        <input\r\n          type=\"message\"\r\n          className=\"w-full h-10 px-5 border-none rounded-full font-mono text-2xl tracking-widest bg-stone-900 text-stone-300 text-md shadow-sm shadow-black\"\r\n          value={message}\r\n          onChange={(event) => setMessage(event.target.value)}\r\n        />\r\n        <button type=\"submit\" className=\"px-2 xl:text-xl lg:text-xl text-base transition ease-in-out duration-500 hover:text-stone-700 \">\r\n          <RiSendPlane2Fill />\r\n        </button>\r\n      </form>\r\n      <div className=\"overflow-y-auto h-full overflow-x-hidden scrollbar bg-stone-900 p-5 scrollbar-thumb-stone-100 scrollbar-thumb-rounded scrollbar-track-black scroll-auto  transition ease-in-out duration-500 hover:scrollbar-thumb-stone-300 border-black border rounded-md \">\r\n\r\n      {messageCards.map((messageCard) => (\r\n        <div\r\n        key={messageCard.id}\r\n        className=\"bg-transparent  w-auto border-b-stone-600 border-b my-4 p-4 text-start text-stone-300 flex text-md xl:text-xl  gap-x-2 shadow-inner shadow-black\"\r\n        ><span className=\"w-9 h-9 text-md rounded-full border-stone-100 border p-2 font-light bg-gradient-to-br from-white to-stone-600 text-stone-800 transition ease-linear duration-75 hover:cursor-pointer hover:bg-stone-100 hover:text-black\"><BsFillPersonFill/></span>\r\n          <div className=\"text-md text-justify font-mono bg-stone-800 border-b border-stone-700 shadow-md shadow-black w-max h-full overflow-x-clip py-1 px-3 rounded-xl\">{messageCard.text}</div>\r\n        </div>\r\n      ))}\r\n    </div>\r\n      </div>\r\n  );\r\n};\r\n\r\nexport default Guest;\r\n"],"mappings":"+RAAA,MAAOA,MAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,gBAAgB,KAAQ,gBAAgB,CACjD,OAAQC,gBAAgB,KAAO,gBAAgB,CAC/C,MAAOC,SAAQ,KAAM,qBAAqB,CAC1C,MAAO,0BAA0B,CACjC,MAAOC,YAAW,KAAM,oBAAoB,yFAE5C,GAAMC,eAAc,CAAG,CACrBC,MAAM,CAAE,yCAAyC,CACjDC,UAAU,CAAE,0BAA0B,CACtCC,WAAW,CAAE,oEAAoE,CACjFC,SAAS,CAAE,UAAU,CACrBC,aAAa,CAAE,sBAAsB,CACrCC,iBAAiB,CAAE,cAAc,CACjCC,KAAK,CAAE,2CACT,CAAC,CAEDT,QAAQ,CAACU,aAAa,CAACR,cAAc,CAAC,CAEtC,GAAMS,GAAE,CAAGX,QAAQ,CAACY,QAAQ,EAAE,CAACC,GAAG,CAAC,UAAU,CAAC,CAE9C,GAAMC,MAAK,CAAG,QAARA,MAAK,EAAS,CAClB,cAA8BlB,QAAQ,CAAC,EAAE,CAAC,wCAAnCmB,OAAO,eAAEC,UAAU,eAC1B,eAAwCpB,QAAQ,CAAC,EAAE,CAAC,yCAA7CqB,YAAY,eAAEC,eAAe,eACpC,eAAsCtB,QAAQ,EAAE,yCAAzCuB,WAAW,eAAEC,cAAc,eAElCvB,SAAS,CAAC,UAAM,CACdc,EAAE,CAACU,EAAE,CAAC,OAAO,CAAE,SAACC,QAAQ,CAAK,CAC3B,GAAIA,QAAQ,CAACC,MAAM,EAAE,CAAE,CACrB,GAAMC,eAAc,CAAGF,QAAQ,CAACG,GAAG,EAAE,CACrC,GAAMC,cAAa,CAAGC,MAAM,CAACC,IAAI,CAACJ,cAAc,CAAC,CAC9CK,GAAG,CAAC,SAACC,GAAG,wBAAQC,EAAE,CAAED,GAAG,EAAKN,cAAc,CAACM,GAAG,CAAC,GAAG,CAAC,CACnDE,OAAO,EAAE,CACZd,eAAe,CAACQ,aAAa,CAAC,CAChC,CACF,CAAC,CAAC,CACJ,CAAC,CAAE,EAAE,CAAC,CAEN7B,SAAS,CAAC,UAAM,CACd,GAAMoC,WAAU,CAAGC,WAAW,CAAC,UAAM,CACnCvB,EAAE,CAACwB,IAAI,CAAC,OAAO,CAAE,SAACb,QAAQ,CAAK,CAC7B,GAAIA,QAAQ,CAACC,MAAM,EAAE,CAAE,CACrB,GAAMC,eAAc,CAAGF,QAAQ,CAACG,GAAG,EAAE,CACrC,GAAMC,cAAa,CAAGC,MAAM,CAACC,IAAI,CAACJ,cAAc,CAAC,CAC9CK,GAAG,CAAC,SAACC,GAAG,wBAAQC,EAAE,CAAED,GAAG,EAAKN,cAAc,CAACM,GAAG,CAAC,GAAG,CAAC,CACnDE,OAAO,EAAE,CACZd,eAAe,CAACQ,aAAa,CAAC,CAE9B,GAAMU,cAAa,CAAG,EAAE,CAExB,GAAIV,aAAa,CAACW,MAAM,CAAGD,aAAa,CAAE,CACxC,GAAME,cAAa,CAAGZ,aAAa,CAACU,aAAa,CAAC,CAClDzB,EAAE,CAAC4B,KAAK,CAACD,aAAa,CAACP,EAAE,CAAC,CAACS,MAAM,EAAE,CACnCd,aAAa,CAACe,MAAM,CAAC,CAAC,CAAEL,aAAa,CAAC,CACxC,CAEF,CACF,CAAC,CAAC,CACJ,CAAC,CAAE,EAAE,CAAC,CAEN,MAAO,kBAAMM,cAAa,CAACT,UAAU,CAAC,GACxC,CAAC,CAAE,EAAE,CAAC,CAEN,GAAMU,oBAAmB,CAAG,QAAtBA,oBAAmB,CAAIC,KAAK,CAAK,CACrCA,KAAK,CAACC,cAAc,EAAE,CACtB,GAAMC,WAAU,CAAG,CAAEC,IAAI,CAAEhC,OAAO,CAAEiC,SAAS,CAAEC,IAAI,CAACC,GAAG,EAAG,CAAC,CAE3DvC,EAAE,CAACwC,IAAI,CAACL,UAAU,CAAC,CAEnB9B,UAAU,CAAC,EAAE,CAAC,CAChB,CAAC,CAED,mBACE,aAAK,SAAS,CAAC,qMAAqM,wBAClN,WAAI,SAAS,CAAC,wCAAwC,UAAC,aAAW,EAAK,cACvE,cACE,SAAS,CAAC,8CAA8C,CACxD,QAAQ,CAAE2B,mBAAoB,wBAE9B,cACE,IAAI,CAAC,SAAS,CACd,SAAS,CAAC,yIAAyI,CACnJ,KAAK,CAAE5B,OAAQ,CACf,QAAQ,CAAE,kBAAC6B,KAAK,QAAK5B,WAAU,CAAC4B,KAAK,CAACQ,MAAM,CAACC,KAAK,CAAC,EAAC,EACpD,cACF,eAAQ,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,gGAAgG,uBAC9H,KAAC,gBAAgB,IAAG,EACb,GACJ,cACP,YAAK,SAAS,CAAC,8PAA8P,UAE5QpC,YAAY,CAACY,GAAG,CAAC,SAACyB,WAAW,qBAC5B,aAEA,SAAS,CAAC,kJAAkJ,wBAC3J,aAAM,SAAS,CAAC,0NAA0N,uBAAC,KAAC,gBAAgB,IAAE,EAAO,cACpQ,YAAK,SAAS,CAAC,gJAAgJ,UAAEA,WAAW,CAACP,IAAI,EAAO,GAHrLO,WAAW,CAACvB,EAAE,CAIb,EACP,CAAC,EACE,GACE,CAEZ,CAAC,CAED,cAAejB,MAAK"},"metadata":{},"sourceType":"module","externalDependencies":[]}